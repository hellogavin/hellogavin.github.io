---
date: 2014-12-18 15:00
layout: post
title: 为什么值类型不是引用类型
category: why
tags:
  - 思考
---
Question：既然值类型是继承自 **Object**，为什么它不是引用类型？

值类型都是隐式派生自 **ValueType** 的（在没有明确定义的情况下，类自动继承 **Object**， **struct** 自动继承 **ValueType**）

面向对象里有一句“万物皆对象”
（<a href="http://blogs.msdn.com/b/ericlippert/archive/2009/08/06/not-everything-derives-from-object.aspx">这句话似乎也不完全对</a>），
但是 **Object** 是引用类型

为什么 **int** 之类的值类型不是引用类型呢:

值类型比如int都是 **struct**，这样声明的： **public struct Int32 : IComparable, IFormattable, IConvertible**

**ValueType** 是抽象类，但是他的子类却都是值类型，这是因为 **CLR对他的子类经过了特殊处理，CLR判断某类型继承自ValueType，那么他会在内存分配方面使它具有值类型的特性（直接分配在栈等）
编译器也经过了特殊处理，使值类型在诸多方面不同于类类型，比如我们不能声明一个类继承ValueType等**

注：虽然值类型继承自 **Obejct**，但是值类型转成 **Object** 还是要 **装箱**。

参考：

1.http://www.cnblogs.com/jhxk/articles/2657489.html

2.http://stackoverflow.com/questions/1316626/does-every-type-in-net-inherit-from-system-object/1316632#1316632

3.http://www.cnblogs.com/c2303191/articles/1065675.html

